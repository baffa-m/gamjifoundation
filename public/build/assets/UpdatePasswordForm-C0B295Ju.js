import{h as m,x as B,y as C,c,a as e,n as r,u as s,d as i,m as v,a0 as h,g as p,b,t as P,F as $,r as D,w as E,o,f as S,T as F,s as I}from"./app-5_hOrnAW.js";import{_}from"./InputError-Vi1-mpuD.js";import{_ as M}from"./PrimaryButton-IbX8sj8A.js";import{u as T}from"./useTheme-CRVpJ3fT.js";import{L as g,E as y}from"./lock-FQU4RJHn.js";import{E as k}from"./eye-CZ7opgaH.js";import{C as Z}from"./circle-check-big-B6LfQokQ.js";import{C as L}from"./check-B_Ua62-D.js";import{X as W}from"./x-31sjroMe.js";import"./createLucideIcon-gRqq9OXS.js";const j={class:"mb-6"},G={class:"space-y-2"},H={class:"relative group"},O={class:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none"},R=["type"],X={class:"space-y-2"},q={class:"relative group"},J={class:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none"},K=["type"],Q={key:0,class:"mt-3 space-y-2"},Y={class:"flex items-center justify-between text-xs"},ss={class:"h-1.5 bg-slate-200 dark:bg-slate-700 rounded-full overflow-hidden"},es={class:"space-y-1"},ts={class:"space-y-2"},as={class:"relative group"},rs={class:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none"},os=["type"],ls={class:"flex items-center gap-4 pt-2"},ns={key:0},is={key:1,class:"flex items-center gap-2"},ds={key:0,class:"flex items-center gap-2 text-emerald-600 dark:text-emerald-400 font-medium text-sm"},gs={__name:"UpdatePasswordForm",setup(cs){const{isDark:n}=T(),V=m(null),z=m(null),w=m(!1),f=m(!1),x=m(!1),t=B({current_password:"",password:"",password_confirmation:""}),u=C(()=>{const d=t.password;if(!d)return{level:0,label:"",class:""};let a=0;return d.length>=8&&a++,d.length>=12&&a++,/[a-z]/.test(d)&&/[A-Z]/.test(d)&&a++,/[0-9]/.test(d)&&a++,/[^a-zA-Z0-9]/.test(d)&&a++,[{level:0,label:"",class:""},{level:1,label:"Weak",class:"password-strength-weak"},{level:2,label:"Weak",class:"password-strength-weak"},{level:3,label:"Medium",class:"password-strength-medium"},{level:4,label:"Good",class:"password-strength-good"},{level:5,label:"Strong",class:"password-strength-strong"}][a]}),N=C(()=>[{label:"At least 8 characters",met:t.password.length>=8},{label:"Contains uppercase & lowercase",met:/[a-z]/.test(t.password)&&/[A-Z]/.test(t.password)},{label:"Contains a number",met:/[0-9]/.test(t.password)},{label:"Contains special character",met:/[^a-zA-Z0-9]/.test(t.password)}]),U=()=>{t.put(route("password.update"),{preserveScroll:!0,onSuccess:()=>t.reset(),onError:()=>{t.errors.password&&t.reset("password","password_confirmation"),t.errors.current_password&&t.reset("current_password")}})};return(d,a)=>(o(),c("section",null,[e("header",j,[e("h2",{class:r(["text-lg font-bold",s(n)?"text-white":"text-slate-900"])}," Update Password ",2),e("p",{class:r(["mt-1 text-sm",s(n)?"text-slate-400":"text-slate-500"])}," Ensure your account is using a long, random password to stay secure. ",2)]),e("form",{onSubmit:I(U,["prevent"]),class:"space-y-6"},[e("div",G,[e("label",{for:"current_password",class:r(["block text-sm font-semibold",s(n)?"text-slate-300":"text-slate-700"])}," Current Password ",2),e("div",H,[e("div",O,[i(s(g),{class:r(["h-5 w-5 transition-colors",s(n)?"text-slate-500 group-focus-within:text-brand-400":"text-slate-400 group-focus-within:text-brand-500"])},null,8,["class"])]),v(e("input",{id:"current_password",ref_key:"currentPasswordInput",ref:z,"onUpdate:modelValue":a[0]||(a[0]=l=>s(t).current_password=l),type:w.value?"text":"password",class:r(["input-premium pl-12 pr-12",{"border-red-500 focus:border-red-500 focus:ring-red-100":s(t).errors.current_password}]),autocomplete:"current-password",placeholder:"Enter current password"},null,10,R),[[h,s(t).current_password]]),e("button",{type:"button",onClick:a[1]||(a[1]=l=>w.value=!w.value),class:"absolute inset-y-0 right-0 pr-4 flex items-center text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 transition-colors"},[w.value?(o(),p(s(y),{key:1,class:"h-5 w-5"})):(o(),p(s(k),{key:0,class:"h-5 w-5"}))])]),i(_,{message:s(t).errors.current_password,class:"mt-2"},null,8,["message"])]),e("div",X,[e("label",{for:"password",class:r(["block text-sm font-semibold",s(n)?"text-slate-300":"text-slate-700"])}," New Password ",2),e("div",q,[e("div",J,[i(s(g),{class:r(["h-5 w-5 transition-colors",s(n)?"text-slate-500 group-focus-within:text-brand-400":"text-slate-400 group-focus-within:text-brand-500"])},null,8,["class"])]),v(e("input",{id:"password",ref_key:"passwordInput",ref:V,"onUpdate:modelValue":a[2]||(a[2]=l=>s(t).password=l),type:f.value?"text":"password",class:r(["input-premium pl-12 pr-12",{"border-red-500 focus:border-red-500 focus:ring-red-100":s(t).errors.password}]),autocomplete:"new-password",placeholder:"Enter new password"},null,10,K),[[h,s(t).password]]),e("button",{type:"button",onClick:a[3]||(a[3]=l=>f.value=!f.value),class:"absolute inset-y-0 right-0 pr-4 flex items-center text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 transition-colors"},[f.value?(o(),p(s(y),{key:1,class:"h-5 w-5"})):(o(),p(s(k),{key:0,class:"h-5 w-5"}))])]),s(t).password?(o(),c("div",Q,[e("div",Y,[e("span",{class:r(["font-medium",s(n)?"text-slate-400":"text-slate-600"])}," Password Strength: ",2),e("span",{class:r(["font-bold",u.value.level<=2?"text-red-500":"",u.value.level===3?"text-amber-500":"",u.value.level===4?"text-emerald-500":"",u.value.level===5?"text-green-600":""])},P(u.value.label),3)]),e("div",ss,[e("div",{class:r(["password-strength-bar",u.value.class])},null,2)])])):b("",!0),s(t).password?(o(),c("div",{key:1,class:r(["mt-3 p-3 rounded-lg border",s(n)?"bg-slate-800/50 border-slate-700":"bg-slate-50 border-slate-200"])},[e("div",{class:r(["text-xs font-semibold mb-2",s(n)?"text-slate-300":"text-slate-700"])}," Password Requirements: ",2),e("div",es,[(o(!0),c($,null,D(N.value,(l,A)=>(o(),c("div",{key:A,class:"flex items-center gap-2 text-xs"},[l.met?(o(),p(s(L),{key:0,class:"w-3.5 h-3.5 text-emerald-500 flex-shrink-0"})):(o(),p(s(W),{key:1,class:"w-3.5 h-3.5 text-slate-400 flex-shrink-0"})),e("span",{class:r(l.met?"text-emerald-600 dark:text-emerald-400":"text-slate-500 dark:text-slate-400")},P(l.label),3)]))),128))])],2)):b("",!0),i(_,{message:s(t).errors.password,class:"mt-2"},null,8,["message"])]),e("div",ts,[e("label",{for:"password_confirmation",class:r(["block text-sm font-semibold",s(n)?"text-slate-300":"text-slate-700"])}," Confirm New Password ",2),e("div",as,[e("div",rs,[i(s(g),{class:r(["h-5 w-5 transition-colors",s(n)?"text-slate-500 group-focus-within:text-brand-400":"text-slate-400 group-focus-within:text-brand-500"])},null,8,["class"])]),v(e("input",{id:"password_confirmation","onUpdate:modelValue":a[4]||(a[4]=l=>s(t).password_confirmation=l),type:x.value?"text":"password",class:"input-premium pl-12 pr-12",autocomplete:"new-password",placeholder:"Confirm new password"},null,8,os),[[h,s(t).password_confirmation]]),e("button",{type:"button",onClick:a[5]||(a[5]=l=>x.value=!x.value),class:"absolute inset-y-0 right-0 pr-4 flex items-center text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 transition-colors"},[x.value?(o(),p(s(y),{key:1,class:"h-5 w-5"})):(o(),p(s(k),{key:0,class:"h-5 w-5"}))])]),i(_,{message:s(t).errors.password_confirmation,class:"mt-2"},null,8,["message"])]),e("div",ls,[i(M,{disabled:s(t).processing,class:r({"opacity-50 cursor-not-allowed":s(t).processing})},{default:E(()=>[s(t).processing?(o(),c("span",is,[...a[6]||(a[6]=[e("svg",{class:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),S(" Updating... ",-1)])])):(o(),c("span",ns,"Update Password"))]),_:1},8,["disabled","class"]),i(F,{"enter-active-class":"transition ease-out duration-300","enter-from-class":"opacity-0 translate-x-2","enter-to-class":"opacity-100 translate-x-0","leave-active-class":"transition ease-in duration-200","leave-from-class":"opacity-100 translate-x-0","leave-to-class":"opacity-0 translate-x-2"},{default:E(()=>[s(t).recentlySuccessful?(o(),c("div",ds,[i(s(Z),{class:"w-5 h-5"}),a[7]||(a[7]=S(" Password updated! ",-1))])):b("",!0)]),_:1})])],32)]))}};export{gs as default};
